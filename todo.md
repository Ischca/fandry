# Fandry - プロジェクトTODO

## 完了済み機能

### フェーズ1-6: 基盤実装 (完了)
- [x] データベーススキーマ設計
- [x] Drizzle ORM実装（PostgreSQL/Neon）
- [x] tRPC API基盤
- [x] Clerk認証統合
- [x] クリエイター機能（プロフィール、投稿管理）
- [x] フィード・発見ページ
- [x] フォロー機能
- [x] いいね・コメント機能
- [x] 投稿作成・編集機能
- [x] 月額支援プラン機能

### フェーズ7-9: UI/UX改善 (完了)
- [x] レスポンシブデザイン
- [x] エラーハンドリング統一
- [x] ローディング状態
- [x] テストデータ投入

### フェーズ10: ポイント決済システム (完了)
- [x] ポイントテーブル設計（userPoints, pointTransactions, pointPackages）
- [x] isAdultフラグ（creators, posts, subscriptionPlans）
- [x] ポイントAPI実装（残高、取引履歴、パッケージ一覧）
- [x] Stripe Checkoutによるポイント購入
- [x] ポイント購入UI（/points ページ）
- [x] ヘッダーにポイント残高表示
- [x] コンテンツ購入API（purchaseRouter）
  - [x] アダルト: ポイントのみ
  - [x] 非アダルト: ポイント / Stripe / ハイブリッド
- [x] PurchaseDialogコンポーネント（支払い方法選択、ポイント配分スライダー）
- [x] サブスクリプションAPI（subscriptionRouter）
  - [x] アダルト: ポイントのみ（毎月自動引き落とし）
  - [x] 非アダルト: ポイント / Stripe
- [x] SubscribeDialogコンポーネント
- [x] チップAPI（tipRouter拡張）
  - [x] アダルト: ポイントのみ
  - [x] 非アダルト: ポイント / Stripe / ハイブリッド
- [x] TipDialogコンポーネント
- [x] Stripe Webhook（ポイント購入、コンテンツ購入、サブスク、チップ）
- [x] ルーター分割（800行→15モジュール）
- [x] エラーハンドリング統一（_errors.ts）

---

## 進行中・今後の実装

### インフラ・運用
- [ ] カスタムドメイン（fndry.app）設定
- [ ] Cloudflare R2ストレージ統合
- [ ] ポイント自動更新（サブスク月次課金）用のcronジョブ
- [ ] 7日間猶予期間ロジック（残高不足時）

### 収益化機能
- [ ] クリエイター向け収益ダッシュボード
- [ ] 振込申請機能
- [ ] 領収書発行機能

### UX改善
- [ ] 無限スクロール対応
- [ ] カテゴリ別フィルタリング
- [ ] 投稿タブ切り替え（すべて/無料/有料/会員限定）
- [ ] 通知システム
- [ ] メッセージ機能

### 管理機能
- [ ] 管理者ダッシュボード
- [ ] コンテンツモデレーション
- [ ] ユーザー管理

---

## 技術的負債・改善項目

- [ ] テストカバレッジ向上
- [ ] E2Eテスト追加
- [ ] パフォーマンス最適化（画像遅延読み込み等）
- [ ] アクセシビリティ対応
