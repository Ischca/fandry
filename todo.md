# Fandry - プロジェクトTODO

## フェーズ1: データベースとバックエンドAPI
- [x] データベーススキーマ設計（creators, posts, tips, subscriptions, patron_badges等）
- [x] Drizzle スキーマファイルの実装
- [x] データベースマイグレーション実行
- [x] クリエイター関連API実装（プロフィール、投稿管理）
- [x] 投げ銭API実装
- [ ] 月額支援プランAPI実装
- [ ] パトロンバッジロジック実装

## フェーズ2: フロントエンド基盤
- [x] デザインシステム構築（カラーパレット、タイポグラフィ）
- [x] 共通コンポーネント作成（投げ銭ダイアログ等）
- [x] ルーティング設定
- [x] 認証フロー統合

## フェーズ3: 主要ページ実装
- [x] クリエイターページ（メイン）
- [x] フィード（補助）
- [x] 発見ページ（補助）
- [x] マイページ
- [ ] 投稿作成・編集ページ
- [ ] プラン設定ページ

## フェーズ4: コア機能実装
- [x] 投げ銭機能（ワンクリック、カスタム金額）
- [ ] 有料投稿購入機能
- [ ] 月額支援プラン加入機能
- [ ] フォロー機能の実装
- [ ] コメント・いいね機能の実装
- [ ] 通知システム

## フェーズ5: 決済統合
- [ ] Segpay統合（フェーズ10で実装）
- [ ] 決済フロー実装
- [ ] 振込申請機能
- [ ] 領収書発行機能

## フェーズ6: 最終調整
- [x] レスポンシブデザイン対応
- [x] エラーハンドリング
- [x] ローディング状態の実装
- [x] パフォーマンス最適化
- [x] テスト実行
- [x] 初回チェックポイント作成

## フェーズ7: ファン体験の向上（フィード・発見ページ）
- [x] フィードページの実装
  - [x] フォロー中のクリエイターの投稿を取得するAPI
  - [x] 投稿カードコンポーネント
  - [ ] 無限スクロール対応（将来の改善）
- [x] 発見ページの実装
  - [x] クリエイター検索機能
  - [x] クリエイターカードコンポーネント
  - [x] 人気クリエイター表示
  - [ ] カテゴリ別フィルタリング（将来の改善）
- [x] フォロー機能の実装
  - [x] フォロー/アンフォローボタン
  - [x] フォロー状態の表示
  - [x] フォロワー数の更新
- [ ] テストとチェックポイント作成

## フェーズ8: UI/UX改善
- [x] CreatorCardをクリック可能にする
- [x] チェックポイント作成

## フェーズ9: テストデータ投入
- [x] テストデータ投入スクリプトの作成
- [ ] サンプルクリエイターの作成
- [ ] サンプル投稿の作成
- [ ] 動作確認

## バグ修正: クリエイターページ404エラー
- [x] ルーティング設定の確認
- [x] CreatorPageコンポーネントの確認
- [x] 動作確認

## UX改善: ログイン済みユーザーのトップページリダイレクト
- [x] Homeコンポーネントにログイン状態チェックを追加
- [x] ログイン済みユーザーを/feedにリダイレクト
- [x] 動作確認
- [x] チェックポイント作成

## テストデータ拡充: フィード確認用データの作成
- [x] 複数のクリエイターデータを作成（7人）
- [x] 各クリエイターの投稿を作成（合計21投稿）
- [x] フォロー関係を設定
- [x] データ投入スクリプトの実行
- [x] フィードページでの表示確認
- [x] チェックポイント作成

## 投稿閲覧権限制御の実装
- [x] 投稿詳細ページの作成
- [x] 投稿取得APIに閲覧権限チェックを追加
- [x] 無料投稿：全文表示
- [x] 有料投稿：購入済みなら全文表示、未購入なら購入UIを表示
- [x] 会員限定投稿：加入済みなら全文表示、未加入ならプラン加入UIを表示
- [x] 購入ダイアログコンポーネントの作成（ガワのみ）
- [x] プラン加入ダイアログコンポーネントの作成（ガワのみ）
- [x] フィードとクリエイターページから投稿詳細ページへのリンク追加
- [x] 動作確認
- [x] チェックポイント作成

## ブランディング変更: CheerからFandryへ
- [x] VITE_APP_TITLEを「Fandry」に変更
- [x] ページタイトルとメタタグを更新
- [x] ロゴテキストを更新
- [x] 動作確認
- [x] チェックポイント作成

## フィード改善: 投稿カードにサムネイル表示
- [x] PostCardコンポーネントにサムネイル画像表示を追加
- [x] 有料・会員限定投稿のサムネイルにぼかし効果を適用
- [x] テストデータに画像URLを追加
- [x] 動作確認
- [x] チェックポイント作成

## 投稿詳細とクリエイターページの改善
- [x] サムネイルクリックで投稿詳細に遷移
- [x] 投稿詳細ページに画像/動画を表示（メディアタイプに応じた表示）
- [x] 要件定義ドキュメントを確認してクリエイターページの機能を整理
- [ ] クリエイターページに月額支援プラン表示を追加（次回実装）
- [x] クリエイターページにフォローボタンの実装
- [x] クリエイターページに投稿カードのサムネイル表示を適用
- [x] SNSリンク表示を追加
- [x] 動作確認
- [x] チェックポイント作成

## 月額支援プラン・いいね・コメント・投稿作成機能の実装
- [x] 月額支援プラン表示をクリエイターページに追加
- [x] 月額支援プランのテストデータを作成
- [x] いいねボタンの実装（投稿詳細ページ）
- [ ] コメント機能の実装（投稿詳細ページ）
- [ ] 投稿作成ページの実装（クリエイター向け）
- [ ] 動作確認
- [ ] チェックポイント作成

## UI改善: プラン表示と投稿の関連付け
- [x] プラン表示をコンパクトに変更
- [x] 会員限定投稿に必要なプランを表示
- [x] 動作確認
- [x] チェックポイント作成

## コメント・投稿作成・タブ切り替え機能の実装
- [x] コメント機能の実装（投稿詳細ページ）
  - [x] コメント一覧表示
  - [x] コメント投稿フォーム
  - [x] コメント削除機能（自分のコメントのみ）
- [x] 投稿作成機能の実装
  - [x] 投稿作成ページの作成
  - [x] 画像アップロード機能（URL入力方式）
  - [x] 有料設定・会員限定設定
  - [x] フィードページに投稿ボタンを追加
  - [ ] 投稿編集機能（将来の改善）
- [ ] 投稿タブ切り替え機能の実装
  - [ ] クリエイターページにタブを追加
  - [ ] すべて/無料/有料/会員限定でフィルタリング
- [x] 動作確認（投稿作成機能）
- [x] チェックポイント作成

## GitHubリポジトリの作成とプッシュ
- [x] GitHubに新規リポジトリを作成
- [x] Gitの初期化とコミット
- [x] GitHubへのプッシュ
- [x] 動作確認

## GitHubリポジトリのリネーム
- [x] GitHubリポジトリを「cheer」から「fandry」にリネーム
- [x] ローカルのリモートURL更新
- [x] 動作確認

## プロジェクト内部のブランディング統一
- [x] package.jsonの名前を「fandry」に変更
- [x] todo.mdのタイトルを更新
- [x] 変更をコミットしてGitHubにプッシュ

## Railway + Neon + Cloudflare R2へのデプロイ
- [x] Neon PostgreSQLデータベースの作成
- [x] Drizzle ORM PostgreSQL移行（MySQL → PostgreSQL）
- [x] Cloudflare R2バケットの作成
- [x] Railwayプロジェクトの作成とGitHub連携
- [x] 環境変数の設定
- [x] デプロイ実行と動作確認
- [x] Clerk認証への移行（Manus OAuth → Clerk）
- [ ] カスタムドメイン（fndry.app）の設定（DNS反映待ち）

## フェーズ10: Segpay決済統合
- [ ] Segpayアカウント申請
- [ ] 審査通過後、Sandbox環境でテスト
- [ ] 決済フローUI/UX設計
  - [ ] 初回決済ページ（カード登録）
  - [ ] ワンクリック投げ銭UI
  - [ ] 有料コンテンツ購入フロー
  - [ ] メンバーシップ加入フロー
- [ ] Segpay One-Click Service API連携
  - [ ] OCToken（カードトークン）管理
  - [ ] 投げ銭API実装
  - [ ] 単品購入API実装
  - [ ] サブスクリプションAPI実装
- [ ] Webhook処理の実装
  - [ ] 決済完了通知
  - [ ] サブスクリプション更新通知
  - [ ] 決済失敗通知
- [ ] 本番環境での決済テスト
